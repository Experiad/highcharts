# WebSharper.ExtJS and SenchaTouch

[WebSharper][ws] bindings to [Ext JS][extjs] and [Sencha Touch][touch].
To use this library, install binaries with [NuGet][nuget], the
package IDs are `WebSharper.ExtJS` and `WebSharper.SenchaTouch`.

Ext JS and Sencha Touch are products of [Sencha Inc.][sencha], HTML5+JavaScript frameworks for web and mobile application development accordingly. These bindings provide a typed access to the libraries from F# and are automatically generated by the official documentation of the libraries. This can sometimes lead to insufficient typing which needs workaround typecast which is easiest to do by using the `As<_>` primitive provided by Websharper.

## Features common to both bindings

For the complete API, please consult the official documentations: [Ext JS][extjsdocs] and [Sencha Touch][touchdocs].

### Names and casing

The names of classes, including letter casing inside the `Ext` main class are the same as the JavaScript versions. Properties and methods have their names converted to Pascal casing as is standard in `.NET` libraries. In some instances, the names of properties and methods are modified for disambiguation:

* Properties having the same name as the class they are in get a "Prop" postfix.
* Methods having the same name as the class they are in get a "Do" prefix.
* Static methods have a "_" prefix.
* `Ext.version` property in Sencha Touch is renamed to `Ext.ExtVersion`.

### Configuration objects

All Sencha framework components can be created by the function `Ext.create` by passing it the name of the class and a configuration object, which describes the initial state of the created component. In the WebSharper bindings, these config classes are represented as nested classes in the `ExtCfg` class. For example this code creates and displays an empty Ext JS window in JavaScript:

```javascript
Ext.create('Ext.window.Window', {
    title: 'Hello',
    height: 200,
    width: 400
}).show();
```

The straightforward translation to F#:

```
(Ext.Create(
    ExtCfg.window.Window(
        Title = "Hello",
        Height = 200,
        Width = 400
    )
) |> As<Ext.window.Window>).Show()
```

`ExtCfg.window.Window` is the class of the configuration objects for `Ext.window.Window`, you can set available config properties with F#'s conscructor with property initializers syntax. `Ext.Create` returns an `obj` because it can create any kind of objects, so a cast is necessary. Howewer there is a way to avoid this, a `.Create()` method is generated for every config object which has the correct JavaScript translation for a call to `Ext.create`, and the return value is correctly typed, so the above can be rewritten as:

```
ExtCfg.window.Window(
    Title = "Hello",
    Height = 200,
    Width = 400
).Create().Show()
```

Config object properties often can take an array of config objects or already initialized components, even mixing these two. There is no easy way to correctly represent it in `.NET`, usually the type for the property gets generated as an array of components from the documentation, but you can use `As` and pass config objects too, without calling `.Create()` on them.

### Event setters

Sencha framework classes using `Ext.mixin.Observable` have an `On` and an `Un` method for adding and removing event handlers. WebSharper binding has generated methods for this for every event on a component, for example instead of `.On('click', ... )` you can write `.OnClick( ... )`, and `.Un('click', ... )` becomes `.UnClick( ... )`. If you want to pass additional arguments to `On` or `Un`, currently you can do that only using the untyped versions.

### Function arguments

For some methods having functions as arguments where the documentation details the signature of the function, the argument is typed in the binding. Where the type details are missing from the documentation of the method, the function argument is typed as `unit -> unit`, and need an `As` cast if you want to specify a function of other signature.

### Object arguments and return types

For some methods, the documentation details the fields expected on an object argument. For these cases, a class nested in `ExtParam` exists for creating these objects.

### Enumerations

For some methods, the documentation details the accepted values of a string argument. These are reflected as enum types contained in `ExtEnum` in the binding.

## Using Ext JS in a WebSharper project

Create a class inheriting WebSharper's `Web.Control` class like this, and use it in a sitelet:

```
type AppControl() =
    inherit Web.Control()

    [<JavaScript>]
    override this.Body =
        upcast Div [] |>! OnAfterRender (fun el ->
            Ext.OnReady(onReady el.Body, null, New [])
        )
```

In the function `onReady renderTo`, define some container, for example an `ExtCfg.container.Viewport` with `RenderTo = renderTo` to have a full screen container that you can use for your web application. 

### Adding CDN references

In the `Intellifactory.WebSharper.ExtJS.Resources` namespace you can find classes defining links to js and css resources to Ext JS GPL versions on Sencha's CDN. You can automatically insert these script and style links to your pages by using the `Require` attribute on a `JavaScript` function using Ext JS, for example `[<Require(typeof<Resources.ExtAll>)>]`. 

## Using Sencha Touch in a WebSharper project

Use a class inheriting WebSharper's `Web.Control` class like this, and use it in a sitelet:

```
type AppControl() =
    inherit Web.Control()

    [<JavaScript>]
    override this.Body =
        Ext.Application(ExtParam.ApplicationConfig(Launch = onLaunch))
        upcast Div []
```

In the function `onLaunch`, create a container, for example an `ExtCfg.Container` with `FullScreen = true` to have a full screen container that you can use for your mobile application.

### Adding themes

The `senchatouch-all.js` file is automatically included in the HTML+JavaScript package created with the Sencha Touch binding. You have to specify which css (theme) you want to use by using a `Require` attribute, for example `[<Require(typeof<Resources.SenchaTouchCss>)>]`.

* [License][license]
* [Git sources at GitHub](http://github.com/intellifactory/websharper.d3)
* [Mercurial sources at Bitbucket](http://bitbucket.org/IntelliFactory/websharper.d3)
* [Issue tracker][issues]

[extjs]: http://www.sencha.com/products/extjs/
[touch]: http://www.sencha.com/products/touch/
[sencha]: http://www.sencha.com/
[extjsdocs]: http://docs.sencha.com/extjs/
[touchdocs]: http://docs.sencha.com/touch/
[issues]: https://bitbucket.org/IntelliFactory/websharper.sencha/issues
[license]: http://github.com/intellifactory/websharper.sencha/blob/master/LICENSE.md
[nuget]: http://nuget.org
[ws]: http://github.com/intellifactory/websharper
